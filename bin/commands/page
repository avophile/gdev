.:RUBY:.

require "#{Main::MAIN_LOCATION}/commands/include/Template.rb"

class Page
    THEMES_FOLDER = "web/app/themes/"
    MODELS_FOLDER = "models/"

    class << self

        def create(name)
            theme_name = Dir["#{THEMES_FOLDER}*"]
                .select{ |f| File.directory? f}
                .unshift
                .join
            
            theme_name = File.basename(theme_name)
            theme_path = "#{Page::THEMES_FOLDER}#{theme_name}"
            models_path = "#{theme_path}#{self::MODELS_FOLDER}"
            model = new Template("page_model", models_path, "Page#{name.capitalize}.php")

            # TODO:
            # Partial
            # Cache?
        end
             
    end

end

Page.create("testi")

.:/RUBY:.